Chrome (browser) extension API
==============================

Экстеншену надо обмениваться данными с сервером:

* Подключиться (авторизироваться) к сущестующему юзеру в телеграме
* Получать с сервера уникальный коннектор для данного домена (создавать
    новый если не существует).


Авторизация
----------

* Генерируем machineid (UUID ?)
* Создаем ссылку deep-linking которая должна открыть trafficrobot бота
    и передать ему machineid
    ```https://telegram.me/trafficrobot?start=AUTH_{machineid}```
* Просим юзера открыть ссылку в телеграме (можно по QR)
* Бот получает machineid и ассоциирует его с текущим
    userid юзера в телеграме. Теперь все создания коннекторов для данного
    machineid будут для этого конекретного userid


API вызовы
----------

* /get_auth_status/:machineid
    получает статус, закреплен ли за такой машиной userid в телеграме

    storage:

        {machineid}_userid = {userid}

* /get_email_for_domain/:domain/:machineid
    получает уникальный имейл для указанного домена.
    На сервере создается ghost-коннектор для юзера, ассоциированого с
    указанным machineid

    storage:

        {userid}_{domain} = {key}
        +
        GhostEmailConnector($key)


* /get_email/:machineid
     получает уникальный имейл (просто, без привязки к домену).
     фича на всякий случай

     storage:

        обыный коннектор, который сначала является ghost

Ghost-коннекторы
----------------
Это как обычные коннекторы, только они не видны пользователю когда он
запрашивает список своих коннекторов.
Ghost-коннектор перестают быть ghost и становится обычным когда на него
приходит хоть одно сообщение. Тогда он появляется в списке у пользователя,
и он может его удалить при желании.